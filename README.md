This XML file does not appear to have any style information associated with it. The document tree is shown below.
<Module>
<ModulePrefs title="AdscrollV4" directory_title="Feeds" description="卑南國中新聞輪播程式" author="蔡效耕 Hsiao Keng, Tsai" author_email="hktsai1977+feedstabs@gmail.com" author_affiliation="卑南國中資訊組" author_location="Taitung, ROC" screenshot="/ig/modules/feeds_tabs.png" thumbnail="/ig/modules/feeds_tabs-thm.png" scrolling="true" singleton="true"></ModulePrefs>
<UserPref name="title" display_name="Gadget Title" default_value="學校新聞輪播"/>
<UserPref name="typeNo" display_name="輪播型態" datatype="enum" default_value="2">
<EnumValue value="1" display_value="廣告1"/>
<EnumValue value="2" display_value="廣告2"/>
<EnumValue value="3" display_value="廣告3"/>
<EnumValue value="4" display_value="廣告4"/>
</UserPref>
<UserPref name="summaries" display_name="摘要字數" datatype="enum" default_value="300">
<EnumValue value="-1" display_value="none"/>
<EnumValue value="100" display_value="short"/>
<EnumValue value="200" display_value="medium"/>
<EnumValue value="300" display_value="long"/>
<EnumValue value="400" display_value="longer"/>
<EnumValue value="0" display_value="show all"/>
</UserPref>
<UserPref name="renderHtml" display_name="可使用HTML" datatype="bool" default_value="true"/>
<UserPref name="timeSpeed" display_name="切換時間" default_value="6000"/>
<UserPref name="fileUrl" display_name="資料來源: URL" datatype="string" default_value="https://sites.google.com/site/pnjhbulletin/ce-shi2/news.txt"/>
<Content type="html">
<![CDATA[
<style type="text/css_no" id="ad1" rel="alternate stylesheet"> body{ font-size: small; } ul, li, h3, p{ margin: 0; padding: 0; } li { list-style: none; } a img { bordeR: none; vertical-align:middle; } #abgne-blo
]]>
<![CDATA[
ck { width: 600px; border: 1px solid #ccc; } #abgne-block .info { display: none; } #abgne-block .on { display: block; } #abgne-block .title { border-top: 2px solid #f6c; } #abgne-block .title li { cursor: pointer; float: left; width: 135px; background-color: #3e3e3e; border-right: 1px solid #000; height: 54px; padding: 7px 7px 4px; } #abgne-block .title li.on, #abgne-block .title li.over { background-color: #f6c; border-right: 1px solid #f6c; } #abgne-block .title li h3 { font-size: 13px; color: #c90; padding-bottom: 6px; } #abgne-block .title li p{ font-size: 12px; color: #ccc; } #abgne-block .title li.on h3, #abgne-block .title .over h3, #abgne-block .title li.on p, #abgne-block .title .over p { color: #fff; } </style> <style type="text/css" id="ad2" rel="stylesheet"> #abgne-block { width: 800px; //* height: 400px; *// position: relative; overflow: hidden; } #abgne-block ul, #abgne-block ul li { margin: 0; padding: 0; list-style: none; } #abgne-block .lists { height: 100%; position: relative; overflow: hidden; } #abgne-block .lists img { width: 100%; height: 100%; border: none; } #abgne-block .controls { width: 100%; height: 35px; position: absolute; bottom: 0; font-size: 13px; z-index: 2; } #abgne-block .controls li { float: left; } #abgne-block .controls li a { display: block; width: 30px; /* 寬度會影響未放大前顯示的字數 */ height: 35px; line-height: 35px; margin-right: 1px; text-align: center; background: #000; color: #fff; text-decoration: none; } #abgne-block .controls li.selected a { background: #f90; } </style> <style type="text/css_no" id="ad3" rel="alternate stylesheet"> ul, li { padding: 0; margin: 0; list-style: none; } #abgne-block{ width: 720px; /* 圖片的寬 */ height: 250px; /* 圖片的高 + 30 */ border: 10px solid #ddd; } .abgne-player { width: 720px; /*圖片的寬 */ height: 220px; /* 圖片的高 */ position: relative; overflow: hidden; } .abgne-player ul.abgne-list { position: absolute; width: 9999px; height: 100%; } .abgne-player ul.abgne-list li { float: left; width: 720px; /* 圖片的寬 */ height: 100%; } .abgne-player ul.abgne-list img{ width: 100%; height: 100%; border: 0; } .abgne-control { height: 24px; padding: 3px; color: #fff; font-size: 13px; background: #333; } .abgne-control ul { float: left; } .abgne-control ul li { float: left; padding: 0 5px; line-height: 20px; margin: 2px; background: #666; cursor: pointer; } .abgne-control ul.numbers { margin-left: 13px; } .abgne-control ul li.current { background: #fff; color:#000; } .abgne-control ul li.hover { background: #fff; color:#000; } </style> <script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> <div id="abgne-block"> </div> <script type="text/javascript"> var prefs = new gadgets.Prefs(); var typeNo = prefs.getInt("typeNo"); var startNo = prefs.getInt("startNo"); var summaries = prefs.getInt("summaries"); var renderHtml = prefs.getBool("renderHtml"); var timeSpeed = prefs.getInt("timeSpeed"); var sUrl = prefs.getString("fileUrl"); //取得新聞資料及標題 function initfunc() { var params = {}; params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT; gadgets.io.makeRequest(sUrl, adFunc, params); }; function adFunc(obj) { var linesText = obj.text.split(/\r\n/g); var newsNo = linesText.length; var t = new Array(newsNo); var c = new Array(newsNo); var p = new Array(newsNo); var l = new Array(newsNo); for (var i = 0; i < newsNo ; i++) { var record = linesText[i].split(","); t[i] = record[0]; c[i] = record[1]; p[i] = record[2]; l[i] = record[3]; } //=============================================================check ================================== switch(typeNo){ case 2: //execute code block 1 document.getElementById("abgne-block").innerHTML = "source:type2"; var html = new Array(); html.push('<ul class="lists">'); for (var i = 0; i < newsNo ; i++) { html.push('<li><a href="'+ l[i]+'" target="_top"><img alt="' + t[i] + '-' + c[i] +' " src=" ' + p[i] + ' " /></a></li>'); } html.push('</ul> '); document.getElementById("abgne-block").innerHTML = html.join(""); $(function(){ // 先取得相關區塊及塊的高 // 並取得 li var $block = $('#abgne-block'), _blockHeight = $block.height(), $list = $block.find('li'), _liOpacity = 0.8, _animateSpeed = 400, _selectedIndex = 0; // 產生下方控制用的 ul li var $controls = $('<ul class="controls"></ul>'), _li = ''; $list.each(function(i){ var $this = $(this).css({ position: 'absolute', top: i==_selectedIndex ? 0 : _blockHeight, zIndex: i==_selectedIndex ? 1 : 0, display: i==_selectedIndex ? 'block' : 'none' }), $a = $this.find('a'); _li += '<li><a href="'+$a.attr('href')+'" target="_top">'+$a.find('img').attr('alt')+'</a></li>' }); // 幫 li 加上透明度 // 並計算 li 基本寬度及最大寬度 var $li = $controls.html(_li).appendTo($block).find('li').css('opacity', _liOpacity), _liWidth = $li.width(), _selectedWidth = $block.width() - ($li.length - 1) * _liWidth - 1; // 當滑鼠移到 li 上時 $li.mouseover(function(){ var $this = $(this), _index = $this.index(); // 如果現在移上去的跟已顯示是的同一個就跳過 if(_selectedIndex == _index) return; // 進行動畫切換 $list.eq(_index).stop(true, true).css({ top: _blockHeight, zIndex: 1, display: 'block' }).animate({ top: 0 }, _animateSpeed).end().eq(_selectedIndex).stop(true, true).animate({ top: -_blockHeight }, _animateSpeed, function(){ $(this).hide(); }); // 把滑鼠移上去的 li 寬度變成最大寬度 // 並將上一個最大寬度的 li 寬度變成基本寬度 //$this.addClass('selected').find('a').width(_selectedWidth).end().siblings('.selected').removeClass('selected').find('a').width(_liWidth-1); $this.addClass('selected').find('a').width(_selectedWidth); $li.eq(_selectedIndex).removeClass('selected').find('a').width(_liWidth-1); _selectedIndex = _index; }).eq(_selectedIndex).addClass('selected').find('a').width(_selectedWidth); // 用 speed 表示切換輪播的速度 var timer, speed = timeSpeed; // 用來自動輪播使用 function auto(){ var _index = (_selectedIndex + 1) % $li.length; $li.eq(_index).mouseover(); timer = setTimeout(auto, speed + _animateSpeed); } $block.hover(function(){ // 當滑鼠移入時, 停止計時器 clearTimeout(timer); }, function(){ // 當滑鼠移出時, 啟動計時器 timer = setTimeout(auto, speed); }); // 啟動計時器 timer = setTimeout(auto, speed); }); break; case 3: //execute code block 1 var html = new Array(); html.push('<div class="abgne-player"><ul class="abgne-list">'); for (var i = 0; i < newsNo ; i++) { html.push('<li><a target="_blank" href="'+ l[i]+'" target="_top"><img src="' + p[i] + ' "></a></li>'); } html.push('</ul></div><div class="abgne-control"><ul class="arrows"> <li class="prev">&lt;</li> <li class="next">&gt;</li> </ul> </div>'); document.getElementById("abgne-block").innerHTML = html.join(""); $(function(){ // 先取得必要的元素並用 jQuery 包裝 // 再來取得 $block 的高度及設定動畫時間 var $block = $('#abgne-block'), $slides = $block.find('ul.abgne-list'), _width = $block.width(), $li = $slides.find('li'), $control = $block.find('.abgne-control'), _animateSpeed = 600, // 加入計時器, 輪播時間及控制開關 timer, _showSpeed = 3000, _stop = false; // 設定 $slides 的寬(為了不讓 li 往下擠) $slides.css('width', ($li.length + 1) * _width); // 產生 li 選項 var _str = ''; for(var i=0, j=$li.length;i<j;i++){ // 每一個 li 都有自己的 className = playerControl_號碼 _str += '<li class="abgne-player-control_' + (i+1) + '">' + (i+1) + '</li>'; } // 產生 ul 並把 li 選項加到其中 var $number = $('<ul class="numbers"></ul>').html(_str).appendTo($control), $numberLi = $number.find('li'); // 並幫 .numbers li 加上 click 事件 $numberLi.click(function(){ var $this = $(this); $this.addClass('current').siblings('.current').removeClass('current'); clearTimeout(timer); // 移動位置到相對應的號碼 $slides.stop().animate({ left: _width * $this.index() * -1 }, _animateSpeed, function(){ // 當廣告移動到正確位置後, 依判斷來啟動計時器 if(!_stop) timer = setTimeout(move, _showSpeed); }); return false; }).eq(0).click(); // 幫 .arrows li 加上 click 事件 $control.find('ul.arrows li').click(function(){ var _index = $numberLi.filter('.current').index(); $numberLi.eq((this.className.indexOf('next')>-1?_index+1:_index-1+$numberLi.length)%$numberLi.length).click(); return false; }); // 當滑鼠移到 $control li 上時, 加上 .hover 效果 // 反之則移除 $control.find('li').hover(function(){ $(this).addClass('hover'); }, function(){ $(this).removeClass('hover'); }); // 如果滑鼠移入 $slides 時 $slides.hover(function(){ // 關閉開關及計時器 _stop = true; clearTimeout(timer); }, function(){ // 如果滑鼠移出 $block 時 // 開啟開關及計時器 _stop = false; timer = setTimeout(move, _showSpeed); }); // 計時器使用 function move(){ $control.find('ul.arrows li.next').click(); } }); break; case 4: //execute code block 1 break; case 5: //execute code block 1 break; case 6: //execute code block 1 break; default: var html = new Array(); html.push('<div class="bd">'); html.push('<div class="info on"><a href="'+ l[0]+'" target="_top"><img src="' + p[0] + ' " /></a></div>'); for (var i = 1; i < newsNo ; i++) { html.push('<div class="info"><a href="'+ l[i]+'" target="_top"><img src="' + p[i] + ' " /></a></div>'); } html.push('<div class="title"> <ul>'); html.push('<li class="on"><h3>'+ t[0]+ '</h3><p>'+ c[0]+ '</p></li>'); for (var i = 1; i < newsNo ; i++) { html.push('<li><h3>'+ t[i]+ '</h3><p>'+ c[i]+ '</p></li>'); } html.push('</ul> </div> </div>'); document.getElementById("abgne-block").innerHTML = html.join(""); $(function(){ // 先取得 #abgne-block-20110111 , 必要參數及輪播間隔 var $block = $('#abgne-block'), timrt, speed = timeSpeed; // 幫 #abgne-block-20110111 .title ul li 加上 hover() 事件 var $li = $('.title ul li', $block).hover(function(){ // 當滑鼠移上時加上 .over 樣式 $(this).addClass('over').siblings('.over').removeClass('over'); }, function(){ // 當滑鼠移出時移除 .over 樣式 $(this).removeClass('over'); }).click(function(){ // 當滑鼠點擊時, 顯示相對應的 div.info // 並加上 .on 樣式 var $this = $(this); $this.add($('.bd div.info', $block).eq($this.index())).addClass('on').siblings('.on').removeClass('on'); }); // 幫 $block 加上 hover() 事件 $block.hover(function(){ // 當滑鼠移上時停止計時器 clearTimeout(timer); }, function(){ // 當滑鼠移出時啟動計時器 timer = setTimeout(move, speed); }); // 控制輪播 function move(){ var _index = $('.title ul li.on', $block).index(); _index = (_index + 1) % $li.length; $li.eq(_index).click(); timer = setTimeout(move, speed); } // 啟動計時器 timer = setTimeout(move, speed); }); } //=============================================================check ================================== }; gadgets.util.registerOnLoadHandler(initfunc); function clearStyle(){ var newAllElements = $("container").getElementsByTagName("*"); for(var b=0;b<newAllElements.length;b++){newAllElements[b].style.cssText = "";} for(var c=0;c<newAllElements.length;c++){newAllElements[c].style.height = "auto";}; try{ $("rightcolumn").style.height = ""; $("mainrightcolumn").style.height = ""; } catch(e){} } </SCRIPT>
]]>
</Content>
</Module>
